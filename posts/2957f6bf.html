<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Bloggy Theme ">
	<meta name="keywords" content="The Best Recipes Theme You Can Find">
    <meta name="author" content="AIR RAYA GROUP">
    <link href='/img/favicon.png' type='image/x-icon' rel='shortcut icon'/>
    <title>Bloggy Theme | The Best Recipes Theme You Can Find</title>

	
<link rel="stylesheet" href="/css/bootstrap.min.css">

	
	<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc2/css/bootstrap-glyphicons.css" rel="stylesheet">
	
    <!-- Custom Fonts -->
	
<link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">

    <!-- Custom CSS -->
	
	 
<link rel="stylesheet" href="/css/custom.css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	

<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="IC攻城狮的摸鱼小屋" type="application/atom+xml">
</head>


<body class="boxed">
	<div id="wrapper">
		<div class="header-top">
	<div class="brand">Bloggy Theme</div>
		<div class="address-bar">The Best Recipes Theme You Can Find</div>
</div>

    <!-- Navigation -->
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- navbar-brand is hidden on larger screens, but visible when the menu is collapsed -->
                <a class="navbar-brand" href="/">Bloggy Theme</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <li>
                        <a href="#">About</a>
                    </li>
					<li>
                        <a href="#">Blog</a>
                    </li>
					<li>
                        <a href="#">Pictures</a>
                    </li>
					<li>
                        <a href="#">Privacy</a>
                    </li>
					<li>
                        <a href="#">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

		
		<!-- Main content -->
			

    <header>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="page-heading">
                            
    
      <div class="text-center">
        
  
    <h1 class="article-title" itemprop="name">
      ARM memory属性的理解
    </h1>
  

      </div>
    
	<div class="text-center">
		

	</div>



						  <div class="text-center authoranddate">
    
<p class="post-meta">
<span class="name">By Rongye</span>
</p>
<p class="article-date">
  <time datetime="2023-10-31T14:19:04.920Z" itemprop="datePublished">On 2023-10-31</time>
</p>



  </div>



                    </div>
                </div>
            </div>
        </div>
    </header>
<section id="blog">	
<div class="container post-content">
	<div class="row">
        <div class="box">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="intro-text text-center" style="padding-top: 10px; padding-bottom: 30px;">
					</div>
					<article id="post-IC攻城狮的摸鱼小屋/技术/ARM/ARM MEMORY属性" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/353995383">ARM各种Memory类型理解 - 知乎</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43936338/article/details/119774287">Cache知识整理-Read-Allocate/Write-Allocate_IC小牛牛的博客-CSDN博客_write allocate</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/wenxiaohua_113/article/details/110069428">Write-back，Write-through及write allocate_wenxiaohua_supper的博客-CSDN博客</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/q876507447/article/details/122285902#:~:text=%E6%89%80%E4%BB%A5chi%E5%8D%8F%E8%AE%AE%EF%BC%8C,%E8%87%B4%E6%80%A7%E7%9A%84%E4%B8%80%E4%B8%AA%E7%B3%BB%E7%BB%9F%E3%80%82">CHI到底是干嘛的 保证cache一致性 2.3 snoop_数字芯片设计与验证－－关易寿的博客-CSDN博客_cache一致性的 chi协议</a></p>
<h2 id="CHI中对属性的描述"><a href="#CHI中对属性的描述" class="headerlink" title="CHI中对属性的描述"></a>CHI中对属性的描述</h2><p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/20230108124646.png"><br>memattr和snpattr，在CHI的协议层通道域段中，是有单独表述的。</p>
<h3 id="MemAttr"><a href="#MemAttr" class="headerlink" title="MemAttr"></a>MemAttr</h3><p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/20230108124813.png"><br>根据链接，可以看到memattr(memory attributes)，涵盖的是EWA(early write acknowledgement)，Device，cacheable和allocate这几个属性的信息。</p>
<h4 id="EWA"><a href="#EWA" class="headerlink" title="EWA"></a>EWA</h4><p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/20230108130254.png"></p>
<p>EWA主要是针对写事务响应的来源进行了指示，<br>这部分内容主要与保序机制相关。</p>
<p>写事务完成与否，是需要给出反馈的，<br>这里的early，涵盖的意思就是写完成响应能不能提前返回。<br>什么叫提前返回呢，这里涉及到CHI总线的结构，<br>当某个请求节点发出写事务，会经过中间节点，然后再发给实际进行写的节点，比如一个ddr memory。</p>
<p>那么，如果写完成响应，是在写数据实实在在的到达了ddr memory以后才发出，这就属于标准的完成响应。<br>如果，在写事务从中间节点发出了， 不管有没有真的写到ddr memory，都算写事务完成了，然后中间节点直接返回了一个写完成响应，那么这就叫做提前返回。</p>
<p>EWA指示的就是，本次事务能不能提前返回写完成响应。</p>
<h4 id="Device"><a href="#Device" class="headerlink" title="Device"></a>Device</h4><p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/20230108130246.png"></p>
<p>device属性是和normal memory相对应的概念。</p>
<p>Device，就是设备。表面这段memory空间是一个设备在使用的。<br>这里简单理解就是，它不是一个单纯的存数据的memory空间。<br>很多Device memory空间，里面放的是对这个设备进行控制的信息，比如是否使能这个设备。<br>所以对于这种Device属性，会有很多特殊的要求，比如保序要求会更高。</p>
<p>normal memory就是我们普通概念的内存，如DDR。</p>
<h4 id="Cacheable"><a href="#Cacheable" class="headerlink" title="Cacheable"></a>Cacheable</h4><p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/20230108130237.png"></p>
<p>顾名思义，就是可缓存性。</p>
<p>如果一个事务访问的memory空间是可缓存的，这代表该段内存的数据在cache中也有，<br>本次事务可以先去看看cache里面数据是否有效，如果能直接从cache中把数据读走，那就最好了。因此访问cache的速度是远快于访问内存的。</p>
<h4 id="Allocate"><a href="#Allocate" class="headerlink" title="Allocate"></a>Allocate</h4><p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/20230108130231.png"><br>关于allocate，需要展开说说Read-Allocate/Write-Allocate<br>它指示的是在访问cache以后发生的行为。</p>
<p>假定现在进行读事务，访问cache miss了，<br>如果是Read through，即直接从内存中读取数据；<br>如果是Read allocate，则需要先把数据读取到Cache中，再从Cache中读数据。</p>
<p>如果是写事务，则不太一样，需要分为hit和miss的情况，<br>hit的时候看的是Write through还是Write back。<br>miss的时候看是否Write allocate。</p>
<p>假定现在进行写事务，访问cache hit了，<br>如果是Write through，就把数据同时写到Cache和内存中；<br>如果是Write back，则先只把数据写到Cache中，等到释放这个cache的时候，才把修改后的内容刷新到内存中。</p>
<p>写事务访问cache miss了，<br>如果是Write allocate，就先把要写的数据载入到Cache中，等到释放这个cache的时候，才把修改后的内容刷新到内存中。</p>
<p>一般，Write Allocate与Write Back一起使用，No Write Allocate与Write Through一起使用。</p>
<h3 id="SnpAttr"><a href="#SnpAttr" class="headerlink" title="SnpAttr"></a>SnpAttr</h3><p>这个属性域段就比较简单，与snoop行为相关<br><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/20230108131539.png"><br>这个东西倒是在CHI中才有，CHI协议全称是Coherent Hub Interface。<br>重点就在这个coherent一致性上，该协议用来确保Cache的一致性。<br>而Snoop就是CHI实现一致性维护的机制，这里就不展开说明了。</p>
<p>这个域段就是用来描述本次事务是否会进行snoop。</p>
<h3 id="汇总"><a href="#汇总" class="headerlink" title="汇总"></a>汇总</h3><p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/20230108132251.png"><br>这个表中还讲了下order，这里的保序是CHI中使用的，就不进一步展开了。<br>看这个表，前面的多种属性描述，最终会汇总为一个Memory type属性。</p>
<h2 id="AXI相关属性描述"><a href="#AXI相关属性描述" class="headerlink" title="AXI相关属性描述"></a>AXI相关属性描述</h2><h3 id="AxCACHE"><a href="#AxCACHE" class="headerlink" title="AxCACHE"></a>AxCACHE</h3><p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/20230108132115.png"><br>在AXI总线协议中，主要是在AxCACHE这个域段中对事务的memory属性进行了定义。<br>这边会简单一点，因为没有一致性维护的工作。保序机制也不是通过这个属性域段实现的。<br>可以看到，这边最后也是汇总描述为memory type，<br>可以对比看一下上面那个表，它是非常接近的，</p>
<p>所以说，ARM整个架构中，对于memory属性的描述是有一套非常丰富的机制的，<br>如果要将各种协议融汇贯通使用起来，对memory 属性的深入理解应该是必不可少的。</p>
<h2 id="ARM架构手册相关描述"><a href="#ARM架构手册相关描述" class="headerlink" title="ARM架构手册相关描述"></a>ARM架构手册相关描述</h2><p>关于memory属性最全面的描述，那当然还是在ARM架构手册中<br><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/20230108132837.png"><br>在B2.7这一个章节中，对所有的memory 属性表述都进行了说明<br><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/20230108132921.png"><br>内容实在是太多了，本文讲不完，以后再针对性的进行学习。</p>
      
    </div>
	
  </div>
  
    
<nav id="article-nav">
  
    <a href="/posts/b6eda8db.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          CHI flitpend是干嘛的
        
      </div>
    </a>
  
  
    <a href="/posts/d429f5fd.html" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">对Stage1页表属性attrindex理解</div>
    </a>
  
</nav>

  
</article>



    



					<div class="postcategory">
							  <div class="article-meta">
    Category: 

    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>

  </div>


			
					</div>
					<div class="date">
					  <div class="tags">
    Tags: 
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ARM/" rel="tag">ARM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MMU/" rel="tag">MMU</a></li></ul>

  </div>



					</div>
					
                </div>
        </div>
	</div>	
</section>

<section id="blog" class="blog">
	<div class="container post-content">
        <div class="row">
            <div class="col-lg-12">
				<script id="dsq-count-scr" src="//hexothemes.disqus.com/count.js" async></script>
               <div id="disqus_thread">
					<script>

					/**
					*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
					*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
					/*
					var disqus_config = function () {
					this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
					this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
					};
					*/
					(function() { // DON'T EDIT BELOW THIS LINE
					var d = document, s = d.createElement('script');
					s.src = 'https://hexothemes.disqus.com/embed.js';
					s.setAttribute('data-timestamp', +new Date());
					(d.head || d.body).appendChild(s);
					})();
					</script>
					<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
                            
            </div>
        </div>
	</div>
</section>	
		
		
<!-- footer -->
      <footer>
         <div id="footer-wrapper" class="footer-wrapper">
            <div class="container">
               <div class="row">
                  <div class="col-md-12">
                     <div class="footer-title">
                        <h2 class="footer-title">About Best Recipes</h2>
						<p class="footer-info">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus dapibus nunc quis metus facilisis, vitae ullamcorper lacus aliquet. Curabitur sed quam ac ipsum cursus pretium. Vivamus bibendum, nunc ac lobortis dictum, mi velit venenatis elit, at bibendum nulla libero vitae velit. Vivamus lacinia non odio et laoreet. Aliquam blandit imperdiet tristique. Ut ut dictum lacus, non venenatis est. Nulla condimentum ut massa at condimentum. Nulla dui turpis, lobortis ut massa sed, posuere consequat odio. Curabitur luctus ac nisi et interdum. Quisque elementum porttitor egestas.</p>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-md-4 col-sm-6 col-xs-12">
                     <div class="category">
                        <a href="#"><p>About us</p></a>
                           <a href="#"><p>Contact us</p></a>
                           <a href="#"><p>Privacy</p></a>
                           <a href="#"><p>Terms of Use</p></a>
                     </div>
                  </div>
                  <div class="col-md-3 col-sm-6 col-xs-12 mb-sm-30 mb-xs-0">
                     <div class="category">
                        <!-- Contacts Widget -->

                        <div class="links">
                           <a href="#"><p>Appetizers</p></a>
                           <a href="#"><p>Drinks</p></a>
                           <a href="#"><p>Breakfast</p></a>
                           <a href="#"><p>Lunch</p></a>
                        </div>
                        <!-- / Contacts Widget -->
                     </div>
                  </div>
                  <div class="col-md-2 col-sm-6 col-xs-12">
                     <div class="category">
                        <div class="links">
                           <a href="#"><p>Desserts</p></a>
                           <a href="#"><p>Dinner</p></a>
                           <a href="#"><p>Side Dishes</p></a>
                           <a href="#"><p>Salads</p></a>
                        </div>
                     </div>
                  </div>
                  <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="category">
							<div class="links">
							   <a href="#"><p>Soups</p></a>
							   <a href="#"><p>Snacks</p></a>
							   <a href="#"><p>Cookies</p></a>
							   <a href="#"><p>Cakes</p></a>
							</div>
						</div>
                  </div>
               </div>
            </div>
         </div>
         <div id="copyrights">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <p class="black">Copyright &copy; Personal 2017</p>
                    </div>
                    <div class="col-lg-6">
                        <p class="black">Supported by <a href="http://www.maplelearning.org" target="_blank">Maple Learning</a> with <i class="fa fa-heart" style="color:#DF0101;"></i> In Toronto, Canada. </p>
                    </div>
                </div>
            </div>
         </div>
      </footer>
      <!-- /footer -->



</script>

    <!-- jQuery -->
	
<script src="/javascript/jquery.js"></script>


    <!-- Bootstrap Core JavaScript -->
	
<script src="/javascript/bootstrap.min.js"></script>


    <!-- Plugin JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

	
	<!-- Scroll to Top Button -->
	<button href="#top" id="backToTopBtn" class="btn btn-md scroll"><span class="glyphicon glyphicon-chevron-up"></span></button>
	  <script>
	  $('#backToTopBtn').click(function(){
			$('html,body').animate({scrollTop:0},'slow');return false;
		});
   </script>
      <script>
   $(document).ready(function(){
	
	//Check to see if the window is top if not then display button
	$(window).scroll(function(){
		if ($(this).scrollTop() > 100) {
			$('.scroll').fadeIn();
		} else {
			$('.scroll').fadeOut();
		}
	});
	
	//Click event to scroll to top
	$('.scroll').click(function(){
		$('html, body').animate({scrollTop : 0},800);
		return false;
	});
	
});
   </script>







  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


	</div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>