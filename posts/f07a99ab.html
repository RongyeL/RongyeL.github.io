

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon1.png">
  <link rel="icon" href="/img/favicon1.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Rongye">
  <meta name="keywords" content="ASIC">
  
    <meta name="description" content="搭建一个能够运行tinyriscv项目的EDA环境。">
<meta property="og:type" content="article">
<meta property="og:title" content="从零开始EDA环境搭建">
<meta property="og:url" content="https://rongyel.github.io/posts/f07a99ab.html">
<meta property="og:site_name" content="IC攻城狮的摸鱼小屋">
<meta property="og:description" content="搭建一个能够运行tinyriscv项目的EDA环境。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642814139944-ee857d06-56b0-4d69-a57b-8b83a29c8aee.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642814400398-fd896e87-372c-4ce4-9177-d423c692c644.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642829810760-93f15068-6b1c-47ee-af81-7b8843dd386f.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642829829171-d855cfa3-ec50-4f4f-88b7-7b316a89a593.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642829848863-87d4e0c1-999e-4a29-abe9-3306b0d09240.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831202456-ca6153e9-4e95-4717-bb93-74f835a79310.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831294171-c0bf3940-7faf-475b-a04e-e1fa9b64f4b9.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831444058-7f51190d-48f7-4228-ab1e-88728e160c45.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831663793-2cc405fc-702b-41a3-a5f5-37505f3bef45.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832085505-4083f8f3-8875-4025-966d-288470b7b616.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832223302-cea5786f-ed22-44f5-99c2-4777876b68e8.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832306465-4bf0df99-b56b-4d08-af38-3a126c16b70c.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832430900-461128d2-8ee0-494f-8780-741a212df340.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642850990398-f8ba9d61-5e90-4ca8-b9dc-354a42fe99ba.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832699123-4b90ce9e-6a38-4338-995d-5863b68cac4b.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642833660190-54aff599-35c8-43df-bdf3-bea7950d7581.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642833876149-8e21b86d-b5f7-4248-a905-f7dbf72fd342.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834156631-494551b1-0033-4366-b518-fc1504af9137.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834214819-f9f6ca15-4a16-4d76-9a28-066b6393a01b.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834365801-df8a4199-25a1-4528-b16f-fcb2764bca81.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834454930-eacfece9-ac6a-4dd9-9739-546d4a1df344.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834551371-8b3c1c95-90ee-4be8-82a1-580628f43fca.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834618117-d6d28b0a-e669-4c4a-84ec-31cc0a4cbcf9.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834674019-aed36f99-f880-4194-b719-df6b27ae984e.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834785652-2f39f13f-116c-4099-b46e-211e6687115e.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834806309-107d1bcf-de09-4916-8a52-6101f7c461a0.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834850719-192e0499-95a3-43dd-92fb-8f313cee672d.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834940453-c8d30666-550c-49ea-b4fd-27c0bfb2cb30.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835002193-d53301fb-1174-48ff-bb4e-79dcf7344567.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835036097-3d9262b6-367a-45fa-ac93-6281843f4a31.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835123217-9287ebb2-edbf-409a-9dda-c1a00fa03573.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835235819-ac6f193c-cf9d-43b3-bebf-7a50ac1a2f18.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835266517-931a7777-e33d-4ab3-bffe-118db1c78114.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835316942-095f8bad-a398-4968-ae59-59bbab8702ee.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835757055-4ef639a0-69f4-47cf-b3ec-7ebe62b0a49a.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835867407-93b23c3f-fd30-4d96-8b85-1ae5a1d7f84b.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835837664-9db24cbc-9e0b-4218-9c0d-e31b93c8cd36.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835915355-08e896d7-4eea-43b6-a05d-e9165eb0b61c.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835986079-5cd04ad3-816b-4138-ab5b-8600453b6edb.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835999572-167196a3-213d-491f-b500-ad4e482ca46b.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836126443-95a38a4d-0c06-47af-962c-e244cbcdb597.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836247989-d49e121b-351a-4f25-bc29-7257736724be.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836322444-5034dc42-bcad-40b4-b776-dc6e7fc47a14.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836388198-78492ac0-e820-46b5-8b9f-7ed749cea853.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836752195-29d99d2d-b451-4471-9d1a-7352238e5998.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836802184-98b9a839-c939-409f-8ca4-82dcc0802e0a.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836831887-fd0dfc2e-dec8-4f06-a631-fca3a414cedf.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836915497-ee469afe-1742-4dc4-a51c-3fe7d481ff74.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836964664-86131e0d-5dbd-40c5-83e0-c61cd391fbcb.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837624498-7e7949de-1278-41ce-819c-63d7adc912e4.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837670858-0baf19e7-46b1-4f73-b501-d4aa97cad09b.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837742180-cdcfaced-2eac-479e-be12-606d1f9e7f13.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837844198-e40a3ae4-9e6a-46f8-a8b5-b1865ae8fe65.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837948750-15e0920b-4f32-4629-9396-df892a8f11bf.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642838023430-1f5c289b-4a22-4221-8d45-17af4c3e22f4.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642841698753-5575bf55-0b9a-4031-9468-4460a37c453a.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642841849110-e2fadf15-b7d2-4645-b936-1db7b30e2afc.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642850188870-cbe6f9fb-8a8a-4b9c-bfe7-ebb2abd644e2.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642843934150-06521622-27cb-4990-ae48-31be79b750f9.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642844568496-0eb9bd3d-8f41-4e3d-8fde-451e4961b778.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642850481531-9c985367-461a-4aac-8814-e9470b6efe83.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642845563701-97b3bd7d-d83b-4217-95ac-84ecc9d44539.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849298195-291dbe76-f976-4ffc-9899-66345ac03da2.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642848549441-fd8d6505-7ab4-4923-a6e6-2efc77ef0d2d.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849032103-675596f5-f767-43b3-bd70-e9546f14ce6e.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849045300-28590f80-c0da-4973-920f-f5b17112c5b3.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849088312-75a6736b-e0c5-4498-84d0-e4f1e90ea30b.png">
<meta property="og:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849150317-3b885dcb-0e75-4f58-b58d-1a5d4e89b46b.png">
<meta property="article:published_time" content="2024-07-06T15:53:35.031Z">
<meta property="article:modified_time" content="2024-07-14T03:21:20.775Z">
<meta property="article:author" content="Rong晔">
<meta property="article:tag" content="数字IC">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642814139944-ee857d06-56b0-4d69-a57b-8b83a29c8aee.png">
  
  
  
  <title>从零开始EDA环境搭建 - IC攻城狮的摸鱼小屋</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"rongyel.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":["home"]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="IC攻城狮的摸鱼小屋" type="application/atom+xml">

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">从零开始EDA环境搭建</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-07-06 23:53" pubdate>
          2024年7月6日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3.1k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          27 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">从零开始EDA环境搭建</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Ubuntu18-04-系统安装"><a href="#Ubuntu18-04-系统安装" class="headerlink" title="Ubuntu18.04 系统安装"></a>Ubuntu18.04 系统安装</h1><p><a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu-releases/18.04/">http://mirrors.aliyun.com/ubuntu-releases/18.04/</a></p>
<p>阿里云镜像下载</p>
<p>VMware配置安装后，启动后为英文。</p>
<p>在更改语言前，先换源。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642814139944-ee857d06-56b0-4d69-a57b-8b83a29c8aee.png" srcset="/img/loading.gif" lazyload></p>
<p>换源<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/61228593">https://zhuanlan.zhihu.com/p/61228593</a></p>
<p>桌面右键打开terminal</p>
<h2 id="首先备份源列表"><a href="#首先备份源列表" class="headerlink" title="首先备份源列表"></a>首先备份源列表</h2><p>sudo cp /etc/apt/sources.list /etc/apt/sources.list_backup  </p>
<h2 id="打开sources-list文件"><a href="#打开sources-list文件" class="headerlink" title="打开sources.list文件"></a>打开sources.list文件</h2><p>sudo gedit /etc/apt/sources.list  </p>
<p>阿里源</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic main restricted universe multiverse</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-security main restricted universe multiverse</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-updates main restricted universe multiverse</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-proposed main restricted universe multiverse</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-backports main restricted universe multiverse</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic main restricted universe multiverse</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-security main restricted universe multiverse</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-updates main restricted universe multiverse</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-proposed main restricted universe multiverse</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-backports main restricted universe multiverse<br>刷新列表<br>sudo apt-get update<br>sudo apt-get upgrade<br>sudo apt-get install build-essential</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642814400398-fd896e87-372c-4ce4-9177-d423c692c644.png" srcset="/img/loading.gif" lazyload></p>
<p>换源以后就可以去下载语言了。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642829810760-93f15068-6b1c-47ee-af81-7b8843dd386f.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642829829171-d855cfa3-ec50-4f4f-88b7-7b316a89a593.png" srcset="/img/loading.gif" lazyload></p>
<p>选择下载语言，找到Chinese</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642829848863-87d4e0c1-999e-4a29-abe9-3306b0d09240.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831202456-ca6153e9-4e95-4717-bb93-74f835a79310.png" srcset="/img/loading.gif" lazyload></p>
<p>更改以后重启。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831294171-c0bf3940-7faf-475b-a04e-e1fa9b64f4b9.png" srcset="/img/loading.gif" lazyload></p>
<p>重启以后提示更改文件夹名称，最好不做修改保持英文。</p>
<p>系统不自带python2，补充安装</p>
<p>sudo apt install python</p>
<p>系统自带python3.6.9，应该够用，就不装先了。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831444058-7f51190d-48f7-4228-ab1e-88728e160c45.png" srcset="/img/loading.gif" lazyload></p>
<p>下面开始准备gvim</p>
<hr>
<h1 id="gvim基本安装"><a href="#gvim基本安装" class="headerlink" title="gvim基本安装"></a>gvim基本安装</h1><p>系统自带的vi会出现乱码问题，先卸载</p>
<p>sudo apt-get remove vim-common</p>
<p>重新安装，直接装vim-gtk3</p>
<p>sudo apt install vim-gtk3</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831663793-2cc405fc-702b-41a3-a5f5-37505f3bef45.png" srcset="/img/loading.gif" lazyload></p>
<p>基本可以使用了，接下来开始搞插件。</p>
<p>安装git</p>
<p>sudo apt install git</p>
<p>接着首先安装vundle插件管理器</p>
<p>参考<a target="_blank" rel="noopener" href="https://www.cnblogs.com/feiyuhuo/p/10274236.html">https://www.cnblogs.com/feiyuhuo/p/10274236.html</a></p>
<p>1、先新建目录</p>
<p>mkdir ~/.vim/bundle/Vundle.vim</p>
<p>2、git 克隆 Vundle 工程到本地</p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/gmarik/Vundle.vim.git">https://github.com/gmarik/Vundle.vim.git</a> ~/.vim/bundle/Vundle.vim</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832085505-4083f8f3-8875-4025-966d-288470b7b616.png" srcset="/img/loading.gif" lazyload></p>
<p>出现这个无法访问的提示……</p>
<p>那只能将https修改为git</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832223302-cea5786f-ed22-44f5-99c2-4777876b68e8.png" srcset="/img/loading.gif" lazyload></p>
<p>已经准备好的.vimrc文件整个复制进去。【此时目录下应该没有，自己新建一个并命名为.vimrc，然后把下面的内容复制进去即可】</p>
<p>启动gvim，此时会报错无所谓，因为插件还没安装。</p>
<p>回车两下进入正常显示后，输入冒号:PluginInstall安装插件</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832306465-4bf0df99-b56b-4d08-af38-3a126c16b70c.png" srcset="/img/loading.gif" lazyload></p>
<p>暂时是只安装三个插件。其他先注释掉了，以后再装。</p>
<p>完成以后重启gvim现在已经是比较好看的了。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832430900-461128d2-8ee0-494f-8780-741a212df340.png" srcset="/img/loading.gif" lazyload>在~/.vim目录内，新建colors和syntax文件夹</p>
<p>语法文件和色彩方案搭配效果如下</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642850990398-f8ba9d61-5e90-4ca8-b9dc-354a42fe99ba.png" srcset="/img/loading.gif" lazyload></p>
<p>看verilog代码才会有效果。</p>
<p>那么至此最基本的准备就完成了。</p>
<p>先拍摄一个快照保存一下</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832699123-4b90ce9e-6a38-4338-995d-5863b68cac4b.png" srcset="/img/loading.gif" lazyload></p>
<hr>
<h1 id="tinyriscv环境搭建"><a href="#tinyriscv环境搭建" class="headerlink" title="tinyriscv环境搭建"></a>tinyriscv环境搭建</h1><p>那么目前是没有多余配置的，</p>
<p>接下来先把tinyriscv的环境准备好。</p>
<p>作者的gitee库</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/liangkangnan/tinyriscv/">https://gitee.com/liangkangnan/tinyriscv/</a></p>
<p>在Downloads文件夹下下载iverilog</p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/steveicarus/iverilog.git">https://github.com/steveicarus/iverilog.git</a></p>
<p>cd iverilog</p>
<p>切换到v11分支(必须用V11或以上的版本)</p>
<p>git checkout v11-branch</p>
<p>安装依赖</p>
<p>sudo apt-get install autoconf gperf flex bison build-essential</p>
<p>编译、安装iverilog和vvp</p>
<p>sh autoconf.sh</p>
<p>./configure</p>
<p>sudo make&amp;make install</p>
<p>然后准备python3软链接</p>
<p>先删除原来的软链接，这个是连到python2的</p>
<p>sudo rm /usr/bin/python</p>
<p>然后建立新的软链接</p>
<p>sudo ln -s /usr/bin/python3.6 /usr/bin/python</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642833660190-54aff599-35c8-43df-bdf3-bea7950d7581.png" srcset="/img/loading.gif" lazyload></p>
<p>那么现在直接如数python会看到打开的是3.6.9了。exit（）退出，接着搞别的。</p>
<p>安装gtkwave</p>
<p>sudo apt-get install gtkwave</p>
<p>下载gun工具链，百度网盘下载(链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/10uLZYf_cgtH94kZI_N6JhQ">https://pan.baidu.com/s/10uLZYf_cgtH94kZI_N6JhQ</a> 提取码：uk0w)</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642833876149-8e21b86d-b5f7-4248-a905-f7dbf72fd342.png" srcset="/img/loading.gif" lazyload></p>
<p>然后直接拖拽进去。</p>
<p>右键可以直接解压</p>
<p>接着克隆tinyriscv项目工程</p>
<p>在Downloads目录下克隆</p>
<p>git clone <a target="_blank" rel="noopener" href="https://gitee.com/liangkangnan/tinyriscv.git">https://gitee.com/liangkangnan/tinyriscv.git</a></p>
<p>主目录下新建个Project文件夹，将刚克隆的复制过来，之前的作为原始备份。</p>
<p>之前下载的工具链复制到tinyriscv工程下的tools目录中</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834156631-494551b1-0033-4366-b518-fc1504af9137.png" srcset="/img/loading.gif" lazyload></p>
<p>修改tinyriscv/tests/example目录下的common.mk文件</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834214819-f9f6ca15-4a16-4d76-9a28-066b6393a01b.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834365801-df8a4199-25a1-4528-b16f-fcb2764bca81.png" srcset="/img/loading.gif" lazyload></p>
<p>把名称修改过来，保持和工具链名称前缀一致。</p>
<p>:wq保存并退出</p>
<p>下面开始进行测试</p>
<hr>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834454930-eacfece9-ac6a-4dd9-9739-546d4a1df344.png" srcset="/img/loading.gif" lazyload></p>
<p>sim目录下启用终端</p>
<figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python</span> .\sim_new_nowave.<span class="hljs-keyword">py</span> ..\tests\isa\generated\rv32ui-<span class="hljs-keyword">p</span>-<span class="hljs-built_in">add</span>.bin inst.data<br></code></pre></td></tr></tbody></table></figure>

<p>指令执行会报错，说没有这个文件或目录。</p>
<p>把右下划线全部替换为左下划</p>
<figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python</span> ./sim_new_nowave.<span class="hljs-keyword">py</span> ../tests/isa/generated/rv32ui-<span class="hljs-keyword">p</span>-<span class="hljs-built_in">add</span>.bin inst.data<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834551371-8b3c1c95-90ee-4be8-82a1-580628f43fca.png" srcset="/img/loading.gif" lazyload></p>
<p>顺利运行得到结果。</p>
<p>找到当前目录下的tinyriscv_soc_tb.vcd文件双击启动gtkwave查看</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834618117-d6d28b0a-e669-4c4a-84ec-31cc0a4cbcf9.png" srcset="/img/loading.gif" lazyload></p>
<p>基本使用没有问题。</p>
<p>测试所有指令集</p>
<figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python</span> ./test_all_isa.<span class="hljs-keyword">py</span><br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834674019-aed36f99-f880-4194-b719-df6b27ae984e.png" srcset="/img/loading.gif" lazyload></p>
<p>测试新指令集</p>
<p>进入到sim/compliance_test目录，执行以下命令：</p>
<p>cd compliance_test</p>
<p>python ./compliance_test.py ../../tests/riscv-compliance/build_generated/rv32i/I-ADD-01.elf.bin inst.data</p>
<p>得到PASS表明通过。</p>
<p>接下来测试c文件编译</p>
<p>进入到tests\example\simple目录，执行以下命令编译：</p>
<p>make</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834785652-2f39f13f-116c-4099-b46e-211e6687115e.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834806309-107d1bcf-de09-4916-8a52-6101f7c461a0.png" srcset="/img/loading.gif" lazyload></p>
<p>在该目录下回生成.bin文件</p>
<p>编译成功之后，进入到sim目录，执行以下命令开始测试：</p>
<p>python ./sim_new_nowave.py ../tests/example/simple/simple.bin inst.data</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834850719-192e0499-95a3-43dd-92fb-8f313cee672d.png" srcset="/img/loading.gif" lazyload></p>
<p>通过，那么至此基本仿真已经没有问题了。</p>
<p>下面测试FPGA移植。</p>
<hr>
<h1 id="FPGA移植准备"><a href="#FPGA移植准备" class="headerlink" title="FPGA移植准备"></a>FPGA移植准备</h1><p>移植需要准备vivado集成开发环境和FPGA，CMSIS-DAP调试器。</p>
<p>我这里安装的是vivado2017.4和Digilent 的 ARTY A7 35T开发板</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834940453-c8d30666-550c-49ea-b4fd-27c0bfb2cb30.png" srcset="/img/loading.gif" lazyload></p>
<p>安装vivado需要准备安装包和许可文件，请自行准备。</p>
<p>此处不能拖拽进虚拟机，需要利用共享文件夹的方式。</p>
<p>在虚拟机设置中，将USB兼容性先修改为USB 3.1</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835002193-d53301fb-1174-48ff-bb4e-79dcf7344567.png" srcset="/img/loading.gif" lazyload></p>
<p>切换到“选项”</p>
<p>启用共享文件夹，不需要关机。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835036097-3d9262b6-367a-45fa-ac93-6281843f4a31.png" srcset="/img/loading.gif" lazyload></p>
<p>之后在根目录/mnt/hgfs/就可以找到自己的共享文件夹了。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835123217-9287ebb2-edbf-409a-9dda-c1a00fa03573.png" srcset="/img/loading.gif" lazyload></p>
<p>进入安装包文件夹，</p>
<p>赋予安装权限</p>
<p>chmod +x xsetup</p>
<p>执行命令</p>
<p>./xsetup</p>
<p>启动安装引导</p>
<p>安装过程和windows下没有区别。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835235819-ac6f193c-cf9d-43b3-bebf-7a50ac1a2f18.png" srcset="/img/loading.gif" lazyload></p>
<p>安装路径要在/home下，不然空间不足。此处建立了一个EDA_Tools目录供后续各种工具安装。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835266517-931a7777-e33d-4ab3-bffe-118db1c78114.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835316942-095f8bad-a398-4968-ae59-59bbab8702ee.png" srcset="/img/loading.gif" lazyload></p>
<p>安装末尾载入许可文件。</p>
<p>在vivado/2017.4目录下找到settings64.sh配置文件。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835757055-4ef639a0-69f4-47cf-b3ec-7ebe62b0a49a.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835867407-93b23c3f-fd30-4d96-8b85-1ae5a1d7f84b.png" srcset="/img/loading.gif" lazyload></p>
<p>编辑主目录配置文件</p>
<p>vim ~/.bashrc</p>
<p>在末尾添加路径</p>
<p>source /home/eda/EDA_Tools/Vivado/2017.4/settings64.sh</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835837664-9db24cbc-9e0b-4218-9c0d-e31b93c8cd36.png" srcset="/img/loading.gif" lazyload></p>
<p>然后重新加载环境配置</p>
<p>source ~/.bashrc</p>
<p>至此应该就可以启动vivado了。</p>
<p>vivado &amp;</p>
<p>启动vivado</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835915355-08e896d7-4eea-43b6-a05d-e9165eb0b61c.png" srcset="/img/loading.gif" lazyload></p>
<p>顺利启动以后先关闭，处理一些剩余内容。</p>
<p>先把xilinx的信息中心卸载掉。</p>
<p>找到这个软件，打开。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835986079-5cd04ad3-816b-4138-ab5b-8600453b6edb.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835999572-167196a3-213d-491f-b500-ad4e482ca46b.png" srcset="/img/loading.gif" lazyload></p>
<p>直接卸载就行。</p>
<p>接着补充安装驱动，否则后续可能无法烧写板子。</p>
<p>/home/eda/EDA_Tools/Vivado/2017.4/data/xicom/cable_drivers/lin64/install_script/install_drivers</p>
<p>在这个路径下，打开终端。</p>
<p>安装驱动。</p>
<p>sudo ./install_drivers</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836126443-95a38a4d-0c06-47af-962c-e244cbcdb597.png" srcset="/img/loading.gif" lazyload></p>
<p>那么vivado也准备完毕以后，开始移植tinyriscv到FPGA上</p>
<hr>
<h1 id="FPGA移植工作"><a href="#FPGA移植工作" class="headerlink" title="FPGA移植工作"></a>FPGA移植工作</h1><p>新建工程</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836247989-d49e121b-351a-4f25-bc29-7257736724be.png" srcset="/img/loading.gif" lazyload></p>
<p>我的板子ARTY A7 35T</p>
<p>器件属性选择xc7a35ticsg324-1l</p>
<p>添加源文件</p>
<p>将tinyriscv下整个RTL添加复制进来</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836322444-5034dc42-bcad-40b4-b776-dc6e7fc47a14.png" srcset="/img/loading.gif" lazyload></p>
<p>将tinyriscv下fpga/constrs下的.xdc约束文件添加进来。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836388198-78492ac0-e820-46b5-8b9f-7ed749cea853.png" srcset="/img/loading.gif" lazyload></p>
<p>打开约束文件，根据自己的开发板进行修改。此处为我自己的约束。</p>
<p>重点关注时钟，我是100M的时钟，等会还要用PLL分频。</p>
<p>GPIO0,1。我分配给了一个LED和一个SW拨码开关。</p>
<p>JTAG和UART使用调试器CMSIS-DAP的相应接口。</p>
<p>都根据自己开发板的原理图来。</p>
<figure class="highlight verilog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><code class="hljs verilog"># 时钟约束<span class="hljs-number">50</span>MHz(<span class="hljs-number">100</span>MHz)<br><br>set_property -dict { PACKAGE_PIN E3 IOSTANDARD LVCMOS33 } [get_ports {sys_clk}];<br><br>create_clock -add -name sys_clk_pin -period <span class="hljs-number">10</span><span class="hljs-variable">.00</span> [get_ports {sys_clk}];<br><br># 时钟引脚 E3<br><br>set_property IOSTANDARD LVCMOS33 [get_ports sys_clk]<br><br>set_property PACKAGE_PIN E3 [get_ports sys_clk]<br><br># 复位引脚 CK_RST/ C2<br><br>set_property IOSTANDARD LVCMOS33 [get_ports rst]<br><br>set_property PACKAGE_PIN C2 [get_ports rst]<br><br># 程序执行完毕指示引脚 LED3/ T10<br><br>set_property IOSTANDARD LVCMOS33 [get_ports over]<br><br>set_property PACKAGE_PIN T10 [get_ports over]<br><br># 程序执行成功指示引脚 LED2/ T9<br><br>set_property IOSTANDARD LVCMOS33 [get_ports succ]<br><br>set_property PACKAGE_PIN T9 [get_ports succ]<br><br># CPU停住指示引脚 LED1/ J5<br><br>set_property IOSTANDARD LVCMOS33 [get_ports halted_ind]<br><br>set_property PACKAGE_PIN J5 [get_ports halted_ind]<br><br># 串口下载使能引脚 SW3/ A10<br><br>set_property IOSTANDARD LVCMOS33 [get_ports uart_debug_pin]<br><br>set_property PACKAGE_PIN A10 [get_ports uart_debug_pin]<br><br># 串口发送引脚 / D4<br><br>set_property IOSTANDARD LVCMOS33 [get_ports uart_tx_pin]<br><br>set_property PACKAGE_PIN D4 [get_ports uart_tx_pin]<br><br># 串口接收引脚 / D3<br><br>set_property IOSTANDARD LVCMOS33 [get_ports uart_rx_pin]<br><br>set_property PACKAGE_PIN D3 [get_ports uart_rx_pin]<br><br># GPIO0引脚 LED0/ H5<br><br>set_property IOSTANDARD LVCMOS33 [get_ports {gpio[<span class="hljs-number">0</span>]}]<br><br>set_property PACKAGE_PIN H5 [get_ports {gpio[<span class="hljs-number">0</span>]}]<br><br># GPIO1引脚 SW0/ A8<br><br>set_property IOSTANDARD LVCMOS33 [get_ports {gpio[<span class="hljs-number">1</span>]}]<br><br>set_property PACKAGE_PIN A8 [get_ports {gpio[<span class="hljs-number">1</span>]}]<br><br># JTAG TCK引脚 JD9/ H2<br><br>set_property IOSTANDARD LVCMOS33 [get_ports jtag_TCK]<br><br>set_property PACKAGE_PIN H2 [get_ports jtag_TCK]<br><br>#create_clock -name jtag_clk_pin -period <span class="hljs-number">300</span> [get_ports {jtag_TCK}];<br><br>#屏蔽 外部时钟输入分配到普通的IO口<br><br>set_property CLOCK_DEDICATED_ROUTE FALSE [get_nets jtag_TCK]<br><br># JTAG TMS引脚 JD10/ G2<br><br>set_property IOSTANDARD LVCMOS33 [get_ports jtag_TMS]<br><br>set_property PACKAGE_PIN G2 [get_ports jtag_TMS]<br><br># JTAG TDI引脚 JD7/ E2<br><br>set_property IOSTANDARD LVCMOS33 [get_ports jtag_TDI]<br><br>set_property PACKAGE_PIN E2 [get_ports jtag_TDI]<br><br># JTAG TDO引脚 JD8/ D2<br><br>set_property IOSTANDARD LVCMOS33 [get_ports jtag_TDO]<br><br>set_property PACKAGE_PIN D2 [get_ports jtag_TDO]<br><br># SPI MISO引脚 CK_MISO/ G1<br><br>set_property IOSTANDARD LVCMOS33 [get_ports spi_miso]<br><br>set_property PACKAGE_PIN G1 [get_ports spi_miso]<br><br># SPI MOSI引脚 CK_MOSI/ H1<br><br>set_property IOSTANDARD LVCMOS33 [get_ports spi_mosi]<br><br>set_property PACKAGE_PIN H1 [get_ports spi_mosi]<br><br># SPI SS引脚 CK_SS/ C1<br><br>set_property IOSTANDARD LVCMOS33 [get_ports spi_ss]<br><br>set_property PACKAGE_PIN C1 [get_ports spi_ss]<br><br># SPI CLK引脚 CK_SCK/ F1<br><br>set_property IOSTANDARD LVCMOS33 [get_ports spi_clk]<br><br>set_property PACKAGE_PIN F1 [get_ports spi_clk]<br><br>set_property BITSTREAM<span class="hljs-variable">.CONFIG</span><span class="hljs-variable">.SPI_BUSWIDTH</span> <span class="hljs-number">4</span> [current_design]<br><br>set_property CONFIG_MODE SPIx4 [current_design]<br><br>set_property BITSTREAM<span class="hljs-variable">.CONFIG</span><span class="hljs-variable">.CONFIGRATE</span> <span class="hljs-number">50</span> [current_design]<br></code></pre></td></tr></tbody></table></figure>
<p>接下来添加锁相环PLL，</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836752195-29d99d2d-b451-4471-9d1a-7352238e5998.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836802184-98b9a839-c939-409f-8ca4-82dcc0802e0a.png" srcset="/img/loading.gif" lazyload></p>
<p>配置IP输出50M时钟</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836831887-fd0dfc2e-dec8-4f06-a631-fca3a414cedf.png" srcset="/img/loading.gif" lazyload></p>
<p>打开顶层文件，修改端口clk为sys_clk</p>
<p>往下，在第一个always块前例化PLL</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836915497-ee469afe-1742-4dc4-a51c-3fe7d481ff74.png" srcset="/img/loading.gif" lazyload></p>
<p>记得补充声明clk，</p>
<p>至此完成所有FPGA工程配置，生成比特流文件</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836964664-86131e0d-5dbd-40c5-83e0-c61cd391fbcb.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837624498-7e7949de-1278-41ce-819c-63d7adc912e4.png" srcset="/img/loading.gif" lazyload></p>
<p>顺利生成比特流文件，连接开发板直接烧写。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837670858-0baf19e7-46b1-4f73-b501-d4aa97cad09b.png" srcset="/img/loading.gif" lazyload></p>
<p>烧写时可能需要重新定位一下，自己生成的bit文件。</p>
<p>板子上的LED亮起，说明顺利烧写进去了，</p>
<p>接下来进行JTAG调试。</p>
<hr>
<h1 id="FPGA运行调试"><a href="#FPGA运行调试" class="headerlink" title="FPGA运行调试"></a>FPGA运行调试</h1><p>调试需要使用到CMSIS-DAP，连好线，做好管脚约束才能使用。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837742180-cdcfaced-2eac-479e-be12-606d1f9e7f13.png" srcset="/img/loading.gif" lazyload></p>
<p>同时还需要上位机，作者提供的只有exe也就是windows下的软件。</p>
<p>*<strong>注意，Linux下的openocd安装非常麻烦，我遇到了很多问题，虽然现在顺利安装并使用了。</strong></p>
<p><strong>不介意的话后续工作可以直接在windows上进行，把一些文件直接拖到windows下使用即可。</strong></p>
<p>在Ubuntu下直接安装上位机openocd</p>
<p>sudo apt install openocd</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837844198-e40a3ae4-9e6a-46f8-a8b5-b1865ae8fe65.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837948750-15e0920b-4f32-4629-9396-df892a8f11bf.png" srcset="/img/loading.gif" lazyload></p>
<p>在tools/openocd目录下，我们需要使用到这个.cfg配置文件。</p>
<p>openocd -f tinyriscv.cfg</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642838023430-1f5c289b-4a22-4221-8d45-17af4c3e22f4.png" srcset="/img/loading.gif" lazyload></p>
<p>提示不行，这是因为默认安装的openocd不支持CMSIS-DAP，</p>
<p>所以我们还需要源码安装自己配置</p>
<p>sudo apt remove openocd先卸载掉原本安装的</p>
<p>进行源码安装，参考</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/daoshengtianxia/article/details/115038674">https://blog.csdn.net/daoshengtianxia/article/details/115038674</a></p>
<p>在Downloads目录下克隆</p>
<p>git clone git://github.com/ntfreak/openocd</p>
<p>cd openocd/</p>
<p>安装依赖</p>
<p>然后执行</p>
<p>./bootstrap</p>
<p>缺少了什么但又不清楚，补充安装了一大堆东西。</p>
<p>sudo apt install debhelper findutils autotools-dev autoconf automake libtool pkg-config libltdl-dev</p>
<p>重新执行</p>
<p>./bootstrap</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642841698753-5575bf55-0b9a-4031-9468-4460a37c453a.png" srcset="/img/loading.gif" lazyload></p>
<p>缺少libusb-1.x，补充安装</p>
<p>sudo apt install libusb-1.0</p>
<p>再次configure</p>
<p>这次应该是顺利配置了</p>
<p>再补充下面这个</p>
<p>./configure –enable-cmsis-dap –enable-jlink –enable-stlink –enable-ti-icdi</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642841849110-e2fadf15-b7d2-4645-b936-1db7b30e2afc.png" srcset="/img/loading.gif" lazyload></p>
<p>提示需要hidapi，</p>
<p>sudo apt-get install libhidapi-dev</p>
<p>其实是要补充安装这个libhidapi的库，然后再配置。注意一定要给权限。</p>
<p>sudo ./configure –enable-cmsis-dap</p>
<p>配置成功一定要看到这个地方是yes的</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642850188870-cbe6f9fb-8a8a-4b9c-bfe7-ebb2abd644e2.png" srcset="/img/loading.gif" lazyload></p>
<p>最后编译安装</p>
<p>sudo make&amp;make install</p>
<p>完成安装以后，回到tinyriscv/tools/openocd目录下</p>
<p>openocd -f tinyriscv.cfg</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642843934150-06521622-27cb-4990-ae48-31be79b750f9.png" srcset="/img/loading.gif" lazyload></p>
<p>现在可以启用这个软件了，当然目前连接还是失败的，需要再做一些配置。</p>
<p>此外，首先需要对.cfg文件中的一些内容做修改。</p>
<p>根据上一张图，有提示说use”adapter speed”not’adapeter_khz’</p>
<p>意思就是用前面那个不要用后面那个表述，</p>
<p>打开.cfg就可以看到对应的内容了，改过来就行。</p>
<p>然后还需要准备权限，参考<a target="_blank" rel="noopener" href="https://www.bbsmax.com/A/A2dm9B87de/">https://www.bbsmax.com/A/A2dm9B87de/</a></p>
<p>用lsusb</p>
<p>确认自己的调试器信息</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642844568496-0eb9bd3d-8f41-4e3d-8fde-451e4961b778.png" srcset="/img/loading.gif" lazyload></p>
<p>Bus 003 Device 008: ID <strong>0d28:0204</strong> NXP LPC1768</p>
<p>需要增加一个rules文件，参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhengyangliu123/article/details/78232241">https://blog.csdn.net/zhengyangliu123/article/details/78232241</a></p>
<p>进入前面克隆的openocd/contrib 目录</p>
<p>使用指令将 60-openocd.rules 文件复制入 /etc/udev/rules.d/ 目录下</p>
<p>sudo cp 60-openocd.rules /etc/udev/rules.d/</p>
<p>然后，对文件做一些修改【此处存疑，可能不改也能用】</p>
<p>sudo gvim /etc/udev/rules.d/60-openocd.rules</p>
<p>最下面的地方，改成跟我下图一样的。</p>
<p>注意idVendor和idProduct要保持和上面看到的<strong>0d28:0204</strong>设备信息一致。</p>
<p>保存以后重启电脑</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642850481531-9c985367-461a-4aac-8814-e9470b6efe83.png" srcset="/img/loading.gif" lazyload></p>
<p>回到之前的tinyriscv中的openocd文件夹，使用终端执行</p>
<p>openocd -f tinyriscv.cfg</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642845563701-97b3bd7d-d83b-4217-95ac-84ecc9d44539.png" srcset="/img/loading.gif" lazyload></p>
<p>终于看到这个了，不容易啊</p>
<p>*<strong>注意，这里存在未知问题。每次重启系统以后，最开始使用openocd会报错。需执行3次，才会识别并启用……</strong></p>
<p><strong>原因不明，但每次都这样。只要启动成功，不关机就不会有这个问题。</strong></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849298195-291dbe76-f976-4ffc-9899-66345ac03da2.png" srcset="/img/loading.gif" lazyload></p>
<p>新开一个终端，看作者后续的操作。windows和linux在路径上有些不同</p>
<p>然后打开另一个CMD窗口，执行以下命令来连接openocd，注意电脑要启用telnet host服务。</p>
<p>telnet localhost 4444</p>
<p>然后在这个CMD窗口下使用load_image命令将固件下载到FPGA，这里以freertos.bin文件为例，如下所示：</p>
<p>load_image D:/gitee/open/tinyriscv/tests/example/FreeRTOS/Demo/tinyriscv_GCC/freertos.bin 0x0 bin 0x0 0x1000000</p>
<p>使用verify_image命令来校验是否下载成功，如下所示：</p>
<p>verify_image D:/gitee/open/tinyriscv/tests/example/FreeRTOS/Demo/tinyriscv_GCC/freertos.bin 0x0</p>
<p>如果下载出错的话会有提示的，没有提示则说明下载成功。</p>
<p>最后执行以下命令让程序跑起来：</p>
<p>resume 0</p>
<p>注意：每次下载程序前记得先执行halt命令停住CPU。；</p>
<p>这里使用gpio进行验证</p>
<p>在/home/eda/Project/tinyriscv/tests/example/gpio路径下使用make编译生成bin文件</p>
<p>在telnet窗口下使用下面命令烧写程序</p>
<p>load_image /home/eda/Project/tinyriscv/tests/example/gpio/gpio.bin 0x0 bin 0x0 0x1000000</p>
<p>verify_image /home/eda/Project/tinyriscv/tests/example/gpio/gpio.bin 0x0 bin 0x0</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642848549441-fd8d6505-7ab4-4923-a6e6-2efc77ef0d2d.png" srcset="/img/loading.gif" lazyload></p>
<p>如果看到这个，说明程序烧写成功了</p>
<p>resume 0</p>
<p>此时开发板已经可以正常使用，LED灯会随对应的那个开关亮灭。</p>
<p>下面测试一下串口，</p>
<p>先去把串口发送uart_tx的程序编译一下</p>
<p>安装串口调试工具cutecom</p>
<p>sudo apt-get install cutecom</p>
<p>直接打开工具</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849032103-675596f5-f767-43b3-bd70-e9546f14ce6e.png" srcset="/img/loading.gif" lazyload></p>
<p>选这个ACM</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849045300-28590f80-c0da-4973-920f-f5b17112c5b3.png" srcset="/img/loading.gif" lazyload></p>
<p>OPEN以后会看到，连接的就是这个CMSIS-DAP调试器</p>
<p>load_image /home/eda/Project/tinyriscv/tests/example/uart_tx/uart_tx.bin 0x0 bin 0x0 0x1000000</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849088312-75a6736b-e0c5-4498-84d0-e4f1e90ea30b.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849150317-3b885dcb-0e75-4f58-b58d-1a5d4e89b46b.png" srcset="/img/loading.gif" lazyload></p>
<p>烧写进去并且resume以后，可以看到串口助手窗口打印了hello world。</p>
<p>至此，整个tinyriscv的linux开发环境搭建完成，可以运行整个项目的所有内容。</p>
<h1 id="其他补充"><a href="#其他补充" class="headerlink" title="其他补充"></a>其他补充</h1><p>输入su命令获取root权限时， 出现了</p>
<p>authentication failure 的问题，即身份验证失败。</p>
<p>需要进行下面操作：</p>
<p>$ sudo passwd root</p>
<p>Enter new UNIX password:</p>
<p>//此时输入你的密码</p>
<p>Retype new UNIX password:</p>
<p>//再次输入，相同密码。</p>
<p>passwd: password updated successfully</p>
<p>此时再用su命令，就可以获取到root权限了。</p>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/" class="category-chain-item">技术笔记</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E6%95%B0%E5%AD%97IC/" class="print-no-link">#数字IC</a>
      
        <a href="/tags/Linux/" class="print-no-link">#Linux</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>从零开始EDA环境搭建</div>
      <div>https://rongyel.github.io/posts/f07a99ab.html</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Rongye</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年7月6日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/posts/f60848c2.html" title="数字IC设计开发Gvim配置">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">数字IC设计开发Gvim配置</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/posts/418ca596.html" title="CHI l-credit的使用关注点">
                        <span class="hidden-mobile">CHI l-credit的使用关注点</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
