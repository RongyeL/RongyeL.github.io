<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Bloggy Theme ">
	<meta name="keywords" content="The Best Recipes Theme You Can Find">
    <meta name="author" content="AIR RAYA GROUP">
    <link href='/img/favicon.png' type='image/x-icon' rel='shortcut icon'/>
    <title>Bloggy Theme | The Best Recipes Theme You Can Find</title>

	
<link rel="stylesheet" href="/css/bootstrap.min.css">

	
	<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc2/css/bootstrap-glyphicons.css" rel="stylesheet">
	
    <!-- Custom Fonts -->
	
<link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">

    <!-- Custom CSS -->
	
	 
<link rel="stylesheet" href="/css/custom.css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	

<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="IC攻城狮的摸鱼小屋" type="application/atom+xml">
</head>


<body class="boxed">
	<div id="wrapper">
		<div class="header-top">
	<div class="brand">Bloggy Theme</div>
		<div class="address-bar">The Best Recipes Theme You Can Find</div>
</div>

    <!-- Navigation -->
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- navbar-brand is hidden on larger screens, but visible when the menu is collapsed -->
                <a class="navbar-brand" href="/">Bloggy Theme</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <li>
                        <a href="#">About</a>
                    </li>
					<li>
                        <a href="#">Blog</a>
                    </li>
					<li>
                        <a href="#">Pictures</a>
                    </li>
					<li>
                        <a href="#">Privacy</a>
                    </li>
					<li>
                        <a href="#">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

		
		<!-- Main content -->
			

    <header>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="page-heading">
                            
    
      <div class="text-center">
        
  
    <h1 class="article-title" itemprop="name">
      从零开始EDA环境搭建
    </h1>
  

      </div>
    
	<div class="text-center">
		

	</div>



						  <div class="text-center authoranddate">
    
<p class="post-meta">
<span class="name">By Rongye</span>
</p>
<p class="article-date">
  <time datetime="2023-03-23T12:12:01.000Z" itemprop="datePublished">On 2023-03-23</time>
</p>



  </div>



                    </div>
                </div>
            </div>
        </div>
    </header>
<section id="blog">	
<div class="container post-content">
	<div class="row">
        <div class="box">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="intro-text text-center" style="padding-top: 10px; padding-bottom: 30px;">
					</div>
					<article id="post-IC攻城狮的摸鱼小屋/技术/Tools/从零开始EDA环境搭建" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Ubuntu18-04-系统安装"><a href="#Ubuntu18-04-系统安装" class="headerlink" title="Ubuntu18.04 系统安装"></a>Ubuntu18.04 系统安装</h1><p><a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu-releases/18.04/">http://mirrors.aliyun.com/ubuntu-releases/18.04/</a></p>
<p>阿里云镜像下载</p>
<p>VMware配置安装后，启动后为英文。</p>
<p>在更改语言前，先换源。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642814139944-ee857d06-56b0-4d69-a57b-8b83a29c8aee.png"></p>
<p>换源<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/61228593">https://zhuanlan.zhihu.com/p/61228593</a></p>
<p>桌面右键打开terminal</p>
<h2 id="首先备份源列表"><a href="#首先备份源列表" class="headerlink" title="首先备份源列表"></a>首先备份源列表</h2><p>sudo cp /etc/apt/sources.list /etc/apt/sources.list_backup  </p>
<h2 id="打开sources-list文件"><a href="#打开sources-list文件" class="headerlink" title="打开sources.list文件"></a>打开sources.list文件</h2><p>sudo gedit /etc/apt/sources.list  </p>
<p>阿里源</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic main restricted universe multiverse</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-security main restricted universe multiverse</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-updates main restricted universe multiverse</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-proposed main restricted universe multiverse</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-backports main restricted universe multiverse</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic main restricted universe multiverse</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-security main restricted universe multiverse</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-updates main restricted universe multiverse</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-proposed main restricted universe multiverse</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-backports main restricted universe multiverse<br>刷新列表<br>sudo apt-get update<br>sudo apt-get upgrade<br>sudo apt-get install build-essential</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642814400398-fd896e87-372c-4ce4-9177-d423c692c644.png"></p>
<p>换源以后就可以去下载语言了。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642829810760-93f15068-6b1c-47ee-af81-7b8843dd386f.png"></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642829829171-d855cfa3-ec50-4f4f-88b7-7b316a89a593.png"></p>
<p>选择下载语言，找到Chinese</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642829848863-87d4e0c1-999e-4a29-abe9-3306b0d09240.png"></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831202456-ca6153e9-4e95-4717-bb93-74f835a79310.png"></p>
<p>更改以后重启。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831294171-c0bf3940-7faf-475b-a04e-e1fa9b64f4b9.png"></p>
<p>重启以后提示更改文件夹名称，最好不做修改保持英文。</p>
<p>系统不自带python2，补充安装</p>
<p>sudo apt install python</p>
<p>系统自带python3.6.9，应该够用，就不装先了。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831444058-7f51190d-48f7-4228-ab1e-88728e160c45.png"></p>
<p>下面开始准备gvim</p>
<hr>
<h1 id="gvim基本安装"><a href="#gvim基本安装" class="headerlink" title="gvim基本安装"></a>gvim基本安装</h1><p>系统自带的vi会出现乱码问题，先卸载</p>
<p>sudo apt-get remove vim-common</p>
<p>重新安装，直接装vim-gtk3</p>
<p>sudo apt install vim-gtk3</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642831663793-2cc405fc-702b-41a3-a5f5-37505f3bef45.png"></p>
<p>基本可以使用了，接下来开始搞插件。</p>
<p>安装git</p>
<p>sudo apt install git</p>
<p>接着首先安装vundle插件管理器</p>
<p>参考<a target="_blank" rel="noopener" href="https://www.cnblogs.com/feiyuhuo/p/10274236.html">https://www.cnblogs.com/feiyuhuo/p/10274236.html</a></p>
<p>1、先新建目录</p>
<p>mkdir ~/.vim/bundle/Vundle.vim</p>
<p>2、git 克隆 Vundle 工程到本地</p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/gmarik/Vundle.vim.git">https://github.com/gmarik/Vundle.vim.git</a> ~/.vim/bundle/Vundle.vim</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832085505-4083f8f3-8875-4025-966d-288470b7b616.png"></p>
<p>出现这个无法访问的提示……</p>
<p>那只能将https修改为git</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832223302-cea5786f-ed22-44f5-99c2-4777876b68e8.png"></p>
<p>已经准备好的.vimrc文件整个复制进去。【此时目录下应该没有，自己新建一个并命名为.vimrc，然后把下面的内容复制进去即可】</p>
<p>启动gvim，此时会报错无所谓，因为插件还没安装。</p>
<p>回车两下进入正常显示后，输入冒号:PluginInstall安装插件</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832306465-4bf0df99-b56b-4d08-af38-3a126c16b70c.png"></p>
<p>暂时是只安装三个插件。其他先注释掉了，以后再装。</p>
<p>完成以后重启gvim现在已经是比较好看的了。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832430900-461128d2-8ee0-494f-8780-741a212df340.png">在~/.vim目录内，新建colors和syntax文件夹</p>
<p>语法文件和色彩方案搭配效果如下</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642850990398-f8ba9d61-5e90-4ca8-b9dc-354a42fe99ba.png"></p>
<p>看verilog代码才会有效果。</p>
<p>那么至此最基本的准备就完成了。</p>
<p>先拍摄一个快照保存一下</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642832699123-4b90ce9e-6a38-4338-995d-5863b68cac4b.png"></p>
<hr>
<h1 id="tinyriscv环境搭建"><a href="#tinyriscv环境搭建" class="headerlink" title="tinyriscv环境搭建"></a>tinyriscv环境搭建</h1><p>那么目前是没有多余配置的，</p>
<p>接下来先把tinyriscv的环境准备好。</p>
<p>作者的gitee库</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/liangkangnan/tinyriscv/">https://gitee.com/liangkangnan/tinyriscv/</a></p>
<p>在Downloads文件夹下下载iverilog</p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/steveicarus/iverilog.git">https://github.com/steveicarus/iverilog.git</a></p>
<p>cd iverilog</p>
<p>切换到v11分支(必须用V11或以上的版本)</p>
<p>git checkout v11-branch</p>
<p>安装依赖</p>
<p>sudo apt-get install autoconf gperf flex bison build-essential</p>
<p>编译、安装iverilog和vvp</p>
<p>sh autoconf.sh</p>
<p>./configure</p>
<p>sudo make&amp;make install</p>
<p>然后准备python3软链接</p>
<p>先删除原来的软链接，这个是连到python2的</p>
<p>sudo rm /usr/bin/python</p>
<p>然后建立新的软链接</p>
<p>sudo ln -s /usr/bin/python3.6 /usr/bin/python</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642833660190-54aff599-35c8-43df-bdf3-bea7950d7581.png"></p>
<p>那么现在直接如数python会看到打开的是3.6.9了。exit（）退出，接着搞别的。</p>
<p>安装gtkwave</p>
<p>sudo apt-get install gtkwave</p>
<p>下载gun工具链，百度网盘下载(链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/10uLZYf_cgtH94kZI_N6JhQ">https://pan.baidu.com/s/10uLZYf_cgtH94kZI_N6JhQ</a> 提取码：uk0w)</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642833876149-8e21b86d-b5f7-4248-a905-f7dbf72fd342.png"></p>
<p>然后直接拖拽进去。</p>
<p>右键可以直接解压</p>
<p>接着克隆tinyriscv项目工程</p>
<p>在Downloads目录下克隆</p>
<p>git clone <a target="_blank" rel="noopener" href="https://gitee.com/liangkangnan/tinyriscv.git">https://gitee.com/liangkangnan/tinyriscv.git</a></p>
<p>主目录下新建个Project文件夹，将刚克隆的复制过来，之前的作为原始备份。</p>
<p>之前下载的工具链复制到tinyriscv工程下的tools目录中</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834156631-494551b1-0033-4366-b518-fc1504af9137.png"></p>
<p>修改tinyriscv/tests/example目录下的common.mk文件</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834214819-f9f6ca15-4a16-4d76-9a28-066b6393a01b.png"></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834365801-df8a4199-25a1-4528-b16f-fcb2764bca81.png"></p>
<p>把名称修改过来，保持和工具链名称前缀一致。</p>
<p>:wq保存并退出</p>
<p>下面开始进行测试</p>
<hr>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834454930-eacfece9-ac6a-4dd9-9739-546d4a1df344.png"></p>
<p>sim目录下启用终端</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python .\sim_new_nowave.py ..\tests\isa\generated\rv32ui-p-add.bin inst.data</span><br></pre></td></tr></tbody></table></figure>

<p>指令执行会报错，说没有这个文件或目录。</p>
<p>把右下划线全部替换为左下划</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ./sim_new_nowave.py ../tests/isa/generated/rv32ui-p-add.bin inst.data</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834551371-8b3c1c95-90ee-4be8-82a1-580628f43fca.png"></p>
<p>顺利运行得到结果。</p>
<p>找到当前目录下的tinyriscv_soc_tb.vcd文件双击启动gtkwave查看</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834618117-d6d28b0a-e669-4c4a-84ec-31cc0a4cbcf9.png"></p>
<p>基本使用没有问题。</p>
<p>测试所有指令集</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ./test_all_isa.py</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834674019-aed36f99-f880-4194-b719-df6b27ae984e.png"></p>
<p>测试新指令集</p>
<p>进入到sim/compliance_test目录，执行以下命令：</p>
<p>cd compliance_test</p>
<p>python ./compliance_test.py ../../tests/riscv-compliance/build_generated/rv32i/I-ADD-01.elf.bin inst.data</p>
<p>得到PASS表明通过。</p>
<p>接下来测试c文件编译</p>
<p>进入到tests\example\simple目录，执行以下命令编译：</p>
<p>make</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834785652-2f39f13f-116c-4099-b46e-211e6687115e.png"></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834806309-107d1bcf-de09-4916-8a52-6101f7c461a0.png"></p>
<p>在该目录下回生成.bin文件</p>
<p>编译成功之后，进入到sim目录，执行以下命令开始测试：</p>
<p>python ./sim_new_nowave.py ../tests/example/simple/simple.bin inst.data</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834850719-192e0499-95a3-43dd-92fb-8f313cee672d.png"></p>
<p>通过，那么至此基本仿真已经没有问题了。</p>
<p>下面测试FPGA移植。</p>
<hr>
<h1 id="FPGA移植准备"><a href="#FPGA移植准备" class="headerlink" title="FPGA移植准备"></a>FPGA移植准备</h1><p>移植需要准备vivado集成开发环境和FPGA，CMSIS-DAP调试器。</p>
<p>我这里安装的是vivado2017.4和Digilent 的 ARTY A7 35T开发板</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642834940453-c8d30666-550c-49ea-b4fd-27c0bfb2cb30.png"></p>
<p>安装vivado需要准备安装包和许可文件，请自行准备。</p>
<p>此处不能拖拽进虚拟机，需要利用共享文件夹的方式。</p>
<p>在虚拟机设置中，将USB兼容性先修改为USB 3.1</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835002193-d53301fb-1174-48ff-bb4e-79dcf7344567.png"></p>
<p>切换到“选项”</p>
<p>启用共享文件夹，不需要关机。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835036097-3d9262b6-367a-45fa-ac93-6281843f4a31.png"></p>
<p>之后在根目录/mnt/hgfs/就可以找到自己的共享文件夹了。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835123217-9287ebb2-edbf-409a-9dda-c1a00fa03573.png"></p>
<p>进入安装包文件夹，</p>
<p>赋予安装权限</p>
<p>chmod +x xsetup</p>
<p>执行命令</p>
<p>./xsetup</p>
<p>启动安装引导</p>
<p>安装过程和windows下没有区别。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835235819-ac6f193c-cf9d-43b3-bebf-7a50ac1a2f18.png"></p>
<p>安装路径要在/home下，不然空间不足。此处建立了一个EDA_Tools目录供后续各种工具安装。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835266517-931a7777-e33d-4ab3-bffe-118db1c78114.png"></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835316942-095f8bad-a398-4968-ae59-59bbab8702ee.png"></p>
<p>安装末尾载入许可文件。</p>
<p>在vivado/2017.4目录下找到settings64.sh配置文件。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835757055-4ef639a0-69f4-47cf-b3ec-7ebe62b0a49a.png"></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835867407-93b23c3f-fd30-4d96-8b85-1ae5a1d7f84b.png"></p>
<p>编辑主目录配置文件</p>
<p>vim ~/.bashrc</p>
<p>在末尾添加路径</p>
<p>source /home/eda/EDA_Tools/Vivado/2017.4/settings64.sh</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835837664-9db24cbc-9e0b-4218-9c0d-e31b93c8cd36.png"></p>
<p>然后重新加载环境配置</p>
<p>source ~/.bashrc</p>
<p>至此应该就可以启动vivado了。</p>
<p>vivado &amp;</p>
<p>启动vivado</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835915355-08e896d7-4eea-43b6-a05d-e9165eb0b61c.png"></p>
<p>顺利启动以后先关闭，处理一些剩余内容。</p>
<p>先把xilinx的信息中心卸载掉。</p>
<p>找到这个软件，打开。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835986079-5cd04ad3-816b-4138-ab5b-8600453b6edb.png"></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642835999572-167196a3-213d-491f-b500-ad4e482ca46b.png"></p>
<p>直接卸载就行。</p>
<p>接着补充安装驱动，否则后续可能无法烧写板子。</p>
<p>/home/eda/EDA_Tools/Vivado/2017.4/data/xicom/cable_drivers/lin64/install_script/install_drivers</p>
<p>在这个路径下，打开终端。</p>
<p>安装驱动。</p>
<p>sudo ./install_drivers</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836126443-95a38a4d-0c06-47af-962c-e244cbcdb597.png"></p>
<p>那么vivado也准备完毕以后，开始移植tinyriscv到FPGA上</p>
<hr>
<h1 id="FPGA移植工作"><a href="#FPGA移植工作" class="headerlink" title="FPGA移植工作"></a>FPGA移植工作</h1><p>新建工程</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836247989-d49e121b-351a-4f25-bc29-7257736724be.png"></p>
<p>我的板子ARTY A7 35T</p>
<p>器件属性选择xc7a35ticsg324-1l</p>
<p>添加源文件</p>
<p>将tinyriscv下整个RTL添加复制进来</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836322444-5034dc42-bcad-40b4-b776-dc6e7fc47a14.png"></p>
<p>将tinyriscv下fpga/constrs下的.xdc约束文件添加进来。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836388198-78492ac0-e820-46b5-8b9f-7ed749cea853.png"></p>
<p>打开约束文件，根据自己的开发板进行修改。此处为我自己的约束。</p>
<p>重点关注时钟，我是100M的时钟，等会还要用PLL分频。</p>
<p>GPIO0,1。我分配给了一个LED和一个SW拨码开关。</p>
<p>JTAG和UART使用调试器CMSIS-DAP的相应接口。</p>
<p>都根据自己开发板的原理图来。</p>
<figure class="highlight verilog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"># 时钟约束<span class="number">50</span>MHz(<span class="number">100</span>MHz)</span><br><span class="line"></span><br><span class="line">set_property -dict { PACKAGE_PIN E3 IOSTANDARD LVCMOS33 } [get_ports {sys_clk}];</span><br><span class="line"></span><br><span class="line">create_clock -add -name sys_clk_pin -period <span class="number">10</span><span class="variable">.00</span> [get_ports {sys_clk}];</span><br><span class="line"></span><br><span class="line"># 时钟引脚 E3</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports sys_clk]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN E3 [get_ports sys_clk]</span><br><span class="line"></span><br><span class="line"># 复位引脚 CK_RST/ C2</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports rst]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN C2 [get_ports rst]</span><br><span class="line"></span><br><span class="line"># 程序执行完毕指示引脚 LED3/ T10</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports over]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN T10 [get_ports over]</span><br><span class="line"></span><br><span class="line"># 程序执行成功指示引脚 LED2/ T9</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports succ]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN T9 [get_ports succ]</span><br><span class="line"></span><br><span class="line"># CPU停住指示引脚 LED1/ J5</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports halted_ind]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN J5 [get_ports halted_ind]</span><br><span class="line"></span><br><span class="line"># 串口下载使能引脚 SW3/ A10</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports uart_debug_pin]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN A10 [get_ports uart_debug_pin]</span><br><span class="line"></span><br><span class="line"># 串口发送引脚 / D4</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports uart_tx_pin]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN D4 [get_ports uart_tx_pin]</span><br><span class="line"></span><br><span class="line"># 串口接收引脚 / D3</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports uart_rx_pin]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN D3 [get_ports uart_rx_pin]</span><br><span class="line"></span><br><span class="line"># GPIO0引脚 LED0/ H5</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports {gpio[<span class="number">0</span>]}]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN H5 [get_ports {gpio[<span class="number">0</span>]}]</span><br><span class="line"></span><br><span class="line"># GPIO1引脚 SW0/ A8</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports {gpio[<span class="number">1</span>]}]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN A8 [get_ports {gpio[<span class="number">1</span>]}]</span><br><span class="line"></span><br><span class="line"># JTAG TCK引脚 JD9/ H2</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports jtag_TCK]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN H2 [get_ports jtag_TCK]</span><br><span class="line"></span><br><span class="line">#create_clock -name jtag_clk_pin -period <span class="number">300</span> [get_ports {jtag_TCK}];</span><br><span class="line"></span><br><span class="line">#屏蔽 外部时钟输入分配到普通的IO口</span><br><span class="line"></span><br><span class="line">set_property CLOCK_DEDICATED_ROUTE FALSE [get_nets jtag_TCK]</span><br><span class="line"></span><br><span class="line"># JTAG TMS引脚 JD10/ G2</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports jtag_TMS]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN G2 [get_ports jtag_TMS]</span><br><span class="line"></span><br><span class="line"># JTAG TDI引脚 JD7/ E2</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports jtag_TDI]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN E2 [get_ports jtag_TDI]</span><br><span class="line"></span><br><span class="line"># JTAG TDO引脚 JD8/ D2</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports jtag_TDO]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN D2 [get_ports jtag_TDO]</span><br><span class="line"></span><br><span class="line"># SPI MISO引脚 CK_MISO/ G1</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports spi_miso]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN G1 [get_ports spi_miso]</span><br><span class="line"></span><br><span class="line"># SPI MOSI引脚 CK_MOSI/ H1</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports spi_mosi]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN H1 [get_ports spi_mosi]</span><br><span class="line"></span><br><span class="line"># SPI SS引脚 CK_SS/ C1</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports spi_ss]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN C1 [get_ports spi_ss]</span><br><span class="line"></span><br><span class="line"># SPI CLK引脚 CK_SCK/ F1</span><br><span class="line"></span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports spi_clk]</span><br><span class="line"></span><br><span class="line">set_property PACKAGE_PIN F1 [get_ports spi_clk]</span><br><span class="line"></span><br><span class="line">set_property BITSTREAM<span class="variable">.CONFIG</span><span class="variable">.SPI_BUSWIDTH</span> <span class="number">4</span> [current_design]</span><br><span class="line"></span><br><span class="line">set_property CONFIG_MODE SPIx4 [current_design]</span><br><span class="line"></span><br><span class="line">set_property BITSTREAM<span class="variable">.CONFIG</span><span class="variable">.CONFIGRATE</span> <span class="number">50</span> [current_design]</span><br></pre></td></tr></tbody></table></figure>
<p>接下来添加锁相环PLL，</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836752195-29d99d2d-b451-4471-9d1a-7352238e5998.png"></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836802184-98b9a839-c939-409f-8ca4-82dcc0802e0a.png"></p>
<p>配置IP输出50M时钟</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836831887-fd0dfc2e-dec8-4f06-a631-fca3a414cedf.png"></p>
<p>打开顶层文件，修改端口clk为sys_clk</p>
<p>往下，在第一个always块前例化PLL</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836915497-ee469afe-1742-4dc4-a51c-3fe7d481ff74.png"></p>
<p>记得补充声明clk，</p>
<p>至此完成所有FPGA工程配置，生成比特流文件</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642836964664-86131e0d-5dbd-40c5-83e0-c61cd391fbcb.png"></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837624498-7e7949de-1278-41ce-819c-63d7adc912e4.png"></p>
<p>顺利生成比特流文件，连接开发板直接烧写。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837670858-0baf19e7-46b1-4f73-b501-d4aa97cad09b.png"></p>
<p>烧写时可能需要重新定位一下，自己生成的bit文件。</p>
<p>板子上的LED亮起，说明顺利烧写进去了，</p>
<p>接下来进行JTAG调试。</p>
<hr>
<h1 id="FPGA运行调试"><a href="#FPGA运行调试" class="headerlink" title="FPGA运行调试"></a>FPGA运行调试</h1><p>调试需要使用到CMSIS-DAP，连好线，做好管脚约束才能使用。</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837742180-cdcfaced-2eac-479e-be12-606d1f9e7f13.png"></p>
<p>同时还需要上位机，作者提供的只有exe也就是windows下的软件。</p>
<p>*<strong>注意，Linux下的openocd安装非常麻烦，我遇到了很多问题，虽然现在顺利安装并使用了。</strong></p>
<p><strong>不介意的话后续工作可以直接在windows上进行，把一些文件直接拖到windows下使用即可。</strong></p>
<p>在Ubuntu下直接安装上位机openocd</p>
<p>sudo apt install openocd</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837844198-e40a3ae4-9e6a-46f8-a8b5-b1865ae8fe65.png"></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642837948750-15e0920b-4f32-4629-9396-df892a8f11bf.png"></p>
<p>在tools/openocd目录下，我们需要使用到这个.cfg配置文件。</p>
<p>openocd -f tinyriscv.cfg</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642838023430-1f5c289b-4a22-4221-8d45-17af4c3e22f4.png"></p>
<p>提示不行，这是因为默认安装的openocd不支持CMSIS-DAP，</p>
<p>所以我们还需要源码安装自己配置</p>
<p>sudo apt remove openocd先卸载掉原本安装的</p>
<p>进行源码安装，参考</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/daoshengtianxia/article/details/115038674">https://blog.csdn.net/daoshengtianxia/article/details/115038674</a></p>
<p>在Downloads目录下克隆</p>
<p>git clone git://github.com/ntfreak/openocd</p>
<p>cd openocd/</p>
<p>安装依赖</p>
<p>然后执行</p>
<p>./bootstrap</p>
<p>缺少了什么但又不清楚，补充安装了一大堆东西。</p>
<p>sudo apt install debhelper findutils autotools-dev autoconf automake libtool pkg-config libltdl-dev</p>
<p>重新执行</p>
<p>./bootstrap</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642841698753-5575bf55-0b9a-4031-9468-4460a37c453a.png"></p>
<p>缺少libusb-1.x，补充安装</p>
<p>sudo apt install libusb-1.0</p>
<p>再次configure</p>
<p>这次应该是顺利配置了</p>
<p>再补充下面这个</p>
<p>./configure –enable-cmsis-dap –enable-jlink –enable-stlink –enable-ti-icdi</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642841849110-e2fadf15-b7d2-4645-b936-1db7b30e2afc.png"></p>
<p>提示需要hidapi，</p>
<p>sudo apt-get install libhidapi-dev</p>
<p>其实是要补充安装这个libhidapi的库，然后再配置。注意一定要给权限。</p>
<p>sudo ./configure –enable-cmsis-dap</p>
<p>配置成功一定要看到这个地方是yes的</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642850188870-cbe6f9fb-8a8a-4b9c-bfe7-ebb2abd644e2.png"></p>
<p>最后编译安装</p>
<p>sudo make&amp;make install</p>
<p>完成安装以后，回到tinyriscv/tools/openocd目录下</p>
<p>openocd -f tinyriscv.cfg</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642843934150-06521622-27cb-4990-ae48-31be79b750f9.png"></p>
<p>现在可以启用这个软件了，当然目前连接还是失败的，需要再做一些配置。</p>
<p>此外，首先需要对.cfg文件中的一些内容做修改。</p>
<p>根据上一张图，有提示说use”adapter speed”not’adapeter_khz’</p>
<p>意思就是用前面那个不要用后面那个表述，</p>
<p>打开.cfg就可以看到对应的内容了，改过来就行。</p>
<p>然后还需要准备权限，参考<a target="_blank" rel="noopener" href="https://www.bbsmax.com/A/A2dm9B87de/">https://www.bbsmax.com/A/A2dm9B87de/</a></p>
<p>用lsusb</p>
<p>确认自己的调试器信息</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642844568496-0eb9bd3d-8f41-4e3d-8fde-451e4961b778.png"></p>
<p>Bus 003 Device 008: ID <strong>0d28:0204</strong> NXP LPC1768</p>
<p>需要增加一个rules文件，参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhengyangliu123/article/details/78232241">https://blog.csdn.net/zhengyangliu123/article/details/78232241</a></p>
<p>进入前面克隆的openocd/contrib 目录</p>
<p>使用指令将 60-openocd.rules 文件复制入 /etc/udev/rules.d/ 目录下</p>
<p>sudo cp 60-openocd.rules /etc/udev/rules.d/</p>
<p>然后，对文件做一些修改【此处存疑，可能不改也能用】</p>
<p>sudo gvim /etc/udev/rules.d/60-openocd.rules</p>
<p>最下面的地方，改成跟我下图一样的。</p>
<p>注意idVendor和idProduct要保持和上面看到的<strong>0d28:0204</strong>设备信息一致。</p>
<p>保存以后重启电脑</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642850481531-9c985367-461a-4aac-8814-e9470b6efe83.png"></p>
<p>回到之前的tinyriscv中的openocd文件夹，使用终端执行</p>
<p>openocd -f tinyriscv.cfg</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642845563701-97b3bd7d-d83b-4217-95ac-84ecc9d44539.png"></p>
<p>终于看到这个了，不容易啊</p>
<p>*<strong>注意，这里存在未知问题。每次重启系统以后，最开始使用openocd会报错。需执行3次，才会识别并启用……</strong></p>
<p><strong>原因不明，但每次都这样。只要启动成功，不关机就不会有这个问题。</strong></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849298195-291dbe76-f976-4ffc-9899-66345ac03da2.png"></p>
<p>新开一个终端，看作者后续的操作。windows和linux在路径上有些不同</p>
<p>然后打开另一个CMD窗口，执行以下命令来连接openocd，注意电脑要启用telnet host服务。</p>
<p>telnet localhost 4444</p>
<p>然后在这个CMD窗口下使用load_image命令将固件下载到FPGA，这里以freertos.bin文件为例，如下所示：</p>
<p>load_image D:/gitee/open/tinyriscv/tests/example/FreeRTOS/Demo/tinyriscv_GCC/freertos.bin 0x0 bin 0x0 0x1000000</p>
<p>使用verify_image命令来校验是否下载成功，如下所示：</p>
<p>verify_image D:/gitee/open/tinyriscv/tests/example/FreeRTOS/Demo/tinyriscv_GCC/freertos.bin 0x0</p>
<p>如果下载出错的话会有提示的，没有提示则说明下载成功。</p>
<p>最后执行以下命令让程序跑起来：</p>
<p>resume 0</p>
<p>注意：每次下载程序前记得先执行halt命令停住CPU。；</p>
<p>这里使用gpio进行验证</p>
<p>在/home/eda/Project/tinyriscv/tests/example/gpio路径下使用make编译生成bin文件</p>
<p>在telnet窗口下使用下面命令烧写程序</p>
<p>load_image /home/eda/Project/tinyriscv/tests/example/gpio/gpio.bin 0x0 bin 0x0 0x1000000</p>
<p>verify_image /home/eda/Project/tinyriscv/tests/example/gpio/gpio.bin 0x0 bin 0x0</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642848549441-fd8d6505-7ab4-4923-a6e6-2efc77ef0d2d.png"></p>
<p>如果看到这个，说明程序烧写成功了</p>
<p>resume 0</p>
<p>此时开发板已经可以正常使用，LED灯会随对应的那个开关亮灭。</p>
<p>下面测试一下串口，</p>
<p>先去把串口发送uart_tx的程序编译一下</p>
<p>安装串口调试工具cutecom</p>
<p>sudo apt-get install cutecom</p>
<p>直接打开工具</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849032103-675596f5-f767-43b3-bd70-e9546f14ce6e.png"></p>
<p>选这个ACM</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849045300-28590f80-c0da-4973-920f-f5b17112c5b3.png"></p>
<p>OPEN以后会看到，连接的就是这个CMSIS-DAP调试器</p>
<p>load_image /home/eda/Project/tinyriscv/tests/example/uart_tx/uart_tx.bin 0x0 bin 0x0 0x1000000</p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849088312-75a6736b-e0c5-4498-84d0-e4f1e90ea30b.png"></p>
<p><img src="https://picgo-2022.obs.cn-south-1.myhuaweicloud.com/image-1642849150317-3b885dcb-0e75-4f58-b58d-1a5d4e89b46b.png"></p>
<p>烧写进去并且resume以后，可以看到串口助手窗口打印了hello world。</p>
<p>至此，整个tinyriscv的linux开发环境搭建完成，可以运行整个项目的所有内容。</p>
<h1 id="其他补充"><a href="#其他补充" class="headerlink" title="其他补充"></a>其他补充</h1><p>输入su命令获取root权限时， 出现了</p>
<p>authentication failure 的问题，即身份验证失败。</p>
<p>需要进行下面操作：</p>
<p>$ sudo passwd root</p>
<p>Enter new UNIX password:</p>
<p>//此时输入你的密码</p>
<p>Retype new UNIX password:</p>
<p>//再次输入，相同密码。</p>
<p>passwd: password updated successfully</p>
<p>此时再用su命令，就可以获取到root权限了。</p>
      
    </div>
	
  </div>
  
    
<nav id="article-nav">
  
    <a href="/posts/35eaf17c.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          EASY_AXI：一个简单的例程，掌握AXI基本事务流程
        
      </div>
    </a>
  
  
    <a href="/posts/f60848c2.html" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">数字IC设计开发Gvim配置</div>
    </a>
  
</nav>

  
</article>



    



					<div class="postcategory">
							  <div class="article-meta">
    Category: 

    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>

  </div>


			
					</div>
					<div class="date">
					  <div class="tags">
    Tags: 
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E5%AD%97IC/" rel="tag">数字IC</a></li></ul>

  </div>



					</div>
					
                </div>
        </div>
	</div>	
</section>

<section id="blog" class="blog">
	<div class="container post-content">
        <div class="row">
            <div class="col-lg-12">
				<script id="dsq-count-scr" src="//hexothemes.disqus.com/count.js" async></script>
               <div id="disqus_thread">
					<script>

					/**
					*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
					*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
					/*
					var disqus_config = function () {
					this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
					this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
					};
					*/
					(function() { // DON'T EDIT BELOW THIS LINE
					var d = document, s = d.createElement('script');
					s.src = 'https://hexothemes.disqus.com/embed.js';
					s.setAttribute('data-timestamp', +new Date());
					(d.head || d.body).appendChild(s);
					})();
					</script>
					<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
                            
            </div>
        </div>
	</div>
</section>	
		
		
<!-- footer -->
      <footer>
         <div id="footer-wrapper" class="footer-wrapper">
            <div class="container">
               <div class="row">
                  <div class="col-md-12">
                     <div class="footer-title">
                        <h2 class="footer-title">About Best Recipes</h2>
						<p class="footer-info">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus dapibus nunc quis metus facilisis, vitae ullamcorper lacus aliquet. Curabitur sed quam ac ipsum cursus pretium. Vivamus bibendum, nunc ac lobortis dictum, mi velit venenatis elit, at bibendum nulla libero vitae velit. Vivamus lacinia non odio et laoreet. Aliquam blandit imperdiet tristique. Ut ut dictum lacus, non venenatis est. Nulla condimentum ut massa at condimentum. Nulla dui turpis, lobortis ut massa sed, posuere consequat odio. Curabitur luctus ac nisi et interdum. Quisque elementum porttitor egestas.</p>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-md-4 col-sm-6 col-xs-12">
                     <div class="category">
                        <a href="#"><p>About us</p></a>
                           <a href="#"><p>Contact us</p></a>
                           <a href="#"><p>Privacy</p></a>
                           <a href="#"><p>Terms of Use</p></a>
                     </div>
                  </div>
                  <div class="col-md-3 col-sm-6 col-xs-12 mb-sm-30 mb-xs-0">
                     <div class="category">
                        <!-- Contacts Widget -->

                        <div class="links">
                           <a href="#"><p>Appetizers</p></a>
                           <a href="#"><p>Drinks</p></a>
                           <a href="#"><p>Breakfast</p></a>
                           <a href="#"><p>Lunch</p></a>
                        </div>
                        <!-- / Contacts Widget -->
                     </div>
                  </div>
                  <div class="col-md-2 col-sm-6 col-xs-12">
                     <div class="category">
                        <div class="links">
                           <a href="#"><p>Desserts</p></a>
                           <a href="#"><p>Dinner</p></a>
                           <a href="#"><p>Side Dishes</p></a>
                           <a href="#"><p>Salads</p></a>
                        </div>
                     </div>
                  </div>
                  <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="category">
							<div class="links">
							   <a href="#"><p>Soups</p></a>
							   <a href="#"><p>Snacks</p></a>
							   <a href="#"><p>Cookies</p></a>
							   <a href="#"><p>Cakes</p></a>
							</div>
						</div>
                  </div>
               </div>
            </div>
         </div>
         <div id="copyrights">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <p class="black">Copyright &copy; Personal 2017</p>
                    </div>
                    <div class="col-lg-6">
                        <p class="black">Supported by <a href="http://www.maplelearning.org" target="_blank">Maple Learning</a> with <i class="fa fa-heart" style="color:#DF0101;"></i> In Toronto, Canada. </p>
                    </div>
                </div>
            </div>
         </div>
      </footer>
      <!-- /footer -->



</script>

    <!-- jQuery -->
	
<script src="/javascript/jquery.js"></script>


    <!-- Bootstrap Core JavaScript -->
	
<script src="/javascript/bootstrap.min.js"></script>


    <!-- Plugin JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

	
	<!-- Scroll to Top Button -->
	<button href="#top" id="backToTopBtn" class="btn btn-md scroll"><span class="glyphicon glyphicon-chevron-up"></span></button>
	  <script>
	  $('#backToTopBtn').click(function(){
			$('html,body').animate({scrollTop:0},'slow');return false;
		});
   </script>
      <script>
   $(document).ready(function(){
	
	//Check to see if the window is top if not then display button
	$(window).scroll(function(){
		if ($(this).scrollTop() > 100) {
			$('.scroll').fadeIn();
		} else {
			$('.scroll').fadeOut();
		}
	});
	
	//Click event to scroll to top
	$('.scroll').click(function(){
		$('html, body').animate({scrollTop : 0},800);
		return false;
	});
	
});
   </script>







  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


	</div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>